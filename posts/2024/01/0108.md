---
title: "LINUX, Nginx 취약점 점검"
subtitle: "회사에서 CentOS, Nginx 취약점 점검 중 새로알게된 내용 정리"
date: "2024-01-08"
tag: "LINUX OS Nginx 취약점 서버"
---

### LINUX 서버 log 파일  
|파일명|utmp|wtmp|btmp|last log|
|---|---|---|---|---|
|정의|현재 로그인한 사용자 상태 정보를 담고 있는 로그파일|성공한 로그인/로그아웃 정보 및 시스템boot/shutdown의 히스토리를 담고있는 로그파일|실패한 로그인 정보를 담고 있는 로그 파일|마지막으로 성공한 로그인 정보를 담고있는 로그 파일|
|파일위치|/var/run/utmp|/var/log/wtmp|/var/log/btmp|/var/log/lastlog|
|로그 확인명령어|w, who, finger|last|lastb|lastlog|  

### LINUX 권한 설정  
|파일종류|특수권한|소유자 접근권한|그룹 소유자 접근권한|기타 사용자 접근권한|
|---|---|---|---|
|-, d, c, b, s, l, p|4:SetUID, 2:SetGID, 1:Sticky bit|4: r, 2: w, x: 1|4: r, 2: w, x: 1|4: r, 2: w, x: 1|  

* SetUID : 사용자의 권한이 있어야만 실행 가능  
* SetGID : 그룹의 권한이 있어야만 실행 가능  
* Sticky-Bit : 설정된 디렉토리에 파일을 생성하면 해당 파일은 생성한 사람의 소유가 되며, 오직 소유자와 root에게만 해당 파일에 대한 삭제 및 권한이 부여됨. 권한자리에 't'가 옴  
    * 예) 디렉토리 권한 1777 (drwxrwxrwt) -> 해당 폴더안의 파일이 권한이 777이라도, 디렉토리 권한이 1777 아래에 있으면 파일의 소유자 및 root 만 삭제할 수 있음.  

### LINUX 권한 확인  
```bash  
$ ls -la ~  
```  
```bash  
$ stat /bin/ls  
```  

### CentOS 버전 확인  
```bash  
# CentOS 커널 버전 확인  
$ uname -a
```  
```bash  
# CentOS 버전 확인  
$ cat /etc/centos-release  
```  
```bash  
$ yum update
```  
[[CentOS 최신 업데이트하기](https://blogger.pe.kr/847/)]  

### CentOS 사용자 및 그룹 정보 파일  
#### UID - 사용자 정보 파일  
* 사용자 번호, 사용자 판별 번호  
* UID가 같은 사용자는 사용자 이름이 다르더라도 같은 사용자로 인식  
* UID를 중복 할당하는 경우, 보안에 문제를 초래할 수 있음  
#### GID - 그룹 정보 파일  
* 기본 그룹  
  * 모든 사용자는 최소 하나의 그룹에 소속되어야 하고, 그 그룹을 기본 그룹이라함  
  * 사용자가 파일 생성 시, 기본 그룹이 파일의 사용자 그룹으로 지정  
* 보조 그룹  
  * 사용자가 소속되는 또 다른 그룹  
  * 보조 그룹도 기본 그룹과 마찬가지로 파일의 권한 중 파일의 사용자 권한을 사용할 수 있음  
  * 모든 사용자가 보조그룹에 소속되어야 하는 것은 아님  
  * 사용자는 보조 그룹을 소유하지 않거나 1개 이상을 소유할 수 있음  
#### 사용자와 그룹파일  
|파일|설명|
|/etc/passwd|시스템에 등록된 사용자 정보|
|/etc/shadow|시스템에 등록된 사용자의 패스워드와 패스워드에 대한 설정|
|/etc/group|시스템에 등록된 그룹 정보|
|/etc/gshadow|시스템에 등록된 그룹의 패스워드와 패스워드에 대한 설정|  
[[각 파일별 설명](https://nearhome.tistory.com/49)]  